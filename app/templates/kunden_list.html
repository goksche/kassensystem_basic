<!-- kassensystem_basic/app/templates/kunden_list.html -->
{% extends "base.html" %}
{% block content %}
<h2 class="text-xl font-semibold mb-4">Kunden</h2>

<form method="get" class="mb-3 flex items-center gap-2">
  <input name="q" value="{{ q or '' }}" placeholder="Suche Name/Telefon/E-Mail" class="border rounded-lg px-3 py-2 w-80">
  <button class="px-3 py-2 rounded-lg border">Suchen</button>
  <a href="/ui/kunden/new" class="ml-auto px-3 py-2 rounded-lg bg-gray-900 text-white">Neu</a>
</form>

<div class="bg-white border rounded-2xl overflow-hidden">
  <table class="w-full text-sm">
    <thead class="bg-gray-50">
      <tr>
        <th class="text-left p-2">Name</th>
        <th class="text-left p-2">Telefon</th>
        <th class="text-left p-2">E-Mail</th>
        <th class="text-right p-2">Punkte</th>
        <th class="text-left p-2">Status</th>
        <th class="text-right p-2">Aktion</th>
      </tr>
    </thead>
    <tbody>
    {% for k in kunden %}
      <tr class="border-t">
        <td class="p-2">{{ k.name }}</td>
        <td class="p-2">{{ k.telefon or '-' }}</td>
        <td class="p-2">{{ k.email or '-' }}</td>
        <td class="p-2 text-right">{{ k.punkte or 0 }}</td>
        <td class="p-2">{{ k.kundenstatus or 'aktiv' }}</td>
        <td class="p-2 text-right">
          <a href="/ui/kunden/{{ k.id }}/edit" class="px-2 py-1 rounded border text-xs">Bearbeiten</a>
          <form action="/ui/kunden/{{ k.id }}/status" method="post" class="inline">
            <button class="px-2 py-1 rounded border text-xs ml-1">{{ 'Inaktiv' if (k.kundenstatus or 'aktiv')=='aktiv' else 'Aktiv' }}</button>
          </form>
        </td>
      </tr>
    {% endfor %}
    {% if kunden|length == 0 %}
      <tr><td class="p-3 text-sm text-gray-500" colspan="6">Keine Kunden gefunden.</td></tr>
    {% endif %}
    </tbody>
  </table>
</div>
{% endblock %}
